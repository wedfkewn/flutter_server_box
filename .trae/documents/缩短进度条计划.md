# 缩短进度条计划

## 任务描述
将主页显示的 CPU、内存、磁盘的进度条缩短至一半并对齐。

## 当前状态分析

### 文件位置
- 进度条代码位于：`lib/view/page/server/tab/card_modern.dart`
- 具体方法：`_buildProgress()` (第172-203行)
- 调用位置：`_buildStats()` (第147-169行)

### 当前实现
```dart
Widget _buildProgress(BuildContext context, String label, double value,
    Color color,
    {String? detail}) {
  return Row(
    children: [
      SizedBox(
        width: 40,
        child: Text(label, style: Theme.of(context).textTheme.bodySmall),
      ),
      const SizedBox(width: 8),
      Expanded(  // 进度条占据剩余所有空间
        child: LinearProgressIndicator(
          value: value.clamp(0.0, 1.0),
          backgroundColor: color.withOpacity(0.1),
          color: color,
          borderRadius: BorderRadius.circular(4),
          minHeight: 6,
        ),
      ),
      const SizedBox(width: 8),
      ConstrainedBox(
        constraints: const BoxConstraints(maxWidth: 80),
        child: Text(
          detail ?? '${(value * 100).toStringAsFixed(1)}%',
          style: Theme.of(context).textTheme.bodySmall?.copyWith(fontSize: 10),
          textAlign: TextAlign.end,
          overflow: TextOverflow.ellipsis,
        ),
      ),
    ],
  );
}
```

### 当前布局结构
- 标签 (40px) + 间距 (8px) + 进度条 (Expanded) + 间距 (8px) + 详情 (max 80px)

## 修改方案

### 目标
将进度条长度缩短至当前的一半，并保持三个进度条（CPU、Mem、磁盘）对齐。

### 具体修改
1. 将 `Expanded` 包裹的进度条改为固定宽度的容器
2. 计算合适的宽度使其约为当前的一半
3. 保持标签和详情文本对齐

### 修改后的代码结构
```dart
Widget _buildProgress(BuildContext context, String label, double value,
    Color color,
    {String? detail}) {
  return Row(
    children: [
      SizedBox(
        width: 40,
        child: Text(label, style: Theme.of(context).textTheme.bodySmall),
      ),
      const SizedBox(width: 8),
      // 修改：使用固定宽度而不是 Expanded
      SizedBox(
        width: 80, // 缩短至约一半宽度
        child: LinearProgressIndicator(
          value: value.clamp(0.0, 1.0),
          backgroundColor: color.withOpacity(0.1),
          color: color,
          borderRadius: BorderRadius.circular(4),
          minHeight: 6,
        ),
      ),
      const SizedBox(width: 8),
      ConstrainedBox(
        constraints: const BoxConstraints(maxWidth: 80),
        child: Text(
          detail ?? '${(value * 100).toStringAsFixed(1)}%',
          style: Theme.of(context).textTheme.bodySmall?.copyWith(fontSize: 10),
          textAlign: TextAlign.end,
          overflow: TextOverflow.ellipsis,
        ),
      ),
    ],
  );
}
```

## 实施步骤
1. 修改 `card_modern.dart` 中的 `_buildProgress` 方法
2. 将 `Expanded` 替换为固定宽度的 `SizedBox`
3. 测试验证进度条显示效果
