# 自动查询服务器 IP 地理位置计划

## 目标
将 IP 查询功能从“用户手动输入查询”修改为“自动查询当前服务器 IP 并显示结果”。

## 修改内容

### 1. 重构 UI 组件 (`lib/view/widget/ip_location_query.dart`)
- **移除**: 输入框 (`Input`) 和搜索按钮。
- **新增**: 
  - 接受 `String ip` 参数。
  - 在组件初始化 (`initState`) 时自动调用 `fetch(ip)`。
- **UI 调整**: 
  - 仅展示查询结果（国家、城市、ISP 等）。
  - 样式调整为更紧凑的信息展示，适配服务器卡片布局。
  - 添加“点击刷新”功能，以便在网络失败或需要更新时重新获取。

### 2. 更新服务器卡片 (`lib/view/page/server/tab/card_modern.dart`)
- **传递参数**: 在实例化 `IpLocationQuery` 时，传入当前服务器的 IP (`spi.ip`)。

## 验证计划
- 运行应用，进入服务器列表页。
- 观察服务器卡片是否自动显示该服务器 IP 对应的地理位置信息。
- 验证缓存机制是否仍然有效（避免列表滚动时重复刷新）。
